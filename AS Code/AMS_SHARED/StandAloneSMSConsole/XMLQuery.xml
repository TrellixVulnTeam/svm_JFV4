<?xml version="1.0" encoding="utf-8" ?>
<Queries>
	<Query id="GetAllApplicationByCompany">
		<DefaultVersion>Select * From AMS_Application Where CompanyID={0}</DefaultVersion>
		<SqlServerVersion>Select * From AMS_ApplicationSQL Where CompanyID={0}</SqlServerVersion>
		<OracleVersion>Select * From AMS_ApplicationQRA Where CompanyID={0}</OracleVersion> 	
	</Query>
	<Query id="GetAllApplication">
		<DefaultVersion>Select * From AMS_Application Where CompanyID={0}</DefaultVersion>
	</Query>
	<Query id="GetReportInfo">
		<SqlServerVersion>Select chReportName,chReportDesc,lobReportData, lobParamReportData ,lobParams,&#x27;Status&#x27; = CASE nPublished WHEN 1 THEN &#x27;Published&#x27; ELSE &#x27;Not Published&#x27; END , npublished from AMS_CViews_Reports where GuidReportID=&#x27;{0}&#x27;</SqlServerVersion>
		<OracleVersion>Select chReportName,chReportDesc,lobReportData, lobParamReportData ,lobParams,CASE WHEN nPublished = 1 THEN &#x27;Published&#x27; ELSE &#x27;Not Published&#x27; END , npublished from AMS_CViews_Reports where GuidReportID=&#x27;{0}&#x27;</OracleVersion>
	</Query>
	<Query id="GetSavedReportsNormal">
		<SqlServerVersion>Select DISTINCT reports.guidreportid &#x27;id&#x27; , reports.chReportName &#x27;Report Name&#x27;, reports.chReportDesc &#x27;Report Description&#x27;,&#x27;Status&#x27; = CASE nPublished WHEN 1 THEN &#x27;Published&#x27; ELSE &#x27;Not Published&#x27; END, reporttype.IsSystem IsSystem, reporttype.reportTypeId reportTypeId, reports.CurrentDate FROM AMS_CVIEWS_REPORTS reports, AMS_ReportType reporttype ,AMS_ReportRoles WHERE reports.reporttypeid=reporttype.reporttypeid  AND reports.guidReportID = AMS_ReportRoles.guidReportID AND AMS_ReportRoles.RoleID IN({0})</SqlServerVersion>
		<OracleVersion>Select DISTINCT reports.guidreportid id , reports.chReportName &#x22;Report Name&#x22;, reports.chReportDesc &#x22;Report Description&#x22;,CASE WHEN nPublished = 1 THEN &#x27;Published&#x27; ELSE &#x27;Not Published&#x27; END &#x22;Status&#x22;, reporttype.IsSystem IsSystem, reporttype.reportTypeId reportTypeId, reports.CurrentDate FROM AMS_CVIEWS_REPORTS reports, AMS_ReportType reporttype ,AMS_ReportRoles WHERE reports.reporttypeid=reporttype.reporttypeid AND reports.guidReportID = AMS_ReportRoles.guidReportID  AND AMS_ReportRoles.RoleID IN({0})</OracleVersion>
	</Query>
	<Query id="GetSavedReportsAdmin">
		<SqlServerVersion>Select DISTINCT reports.guidreportid &#x27;id&#x27; , reports.chReportName &#x27;Report Name&#x27;,reports.chReportDesc &#x27;Report Description&#x27;, &#x27;Status&#x27; = CASE nPublished WHEN 1 THEN &#x27;Published&#x27; ELSE &#x27;Not Published&#x27; END, reporttype.IsSystem IsSystem, reporttype.reportTypeId reportTypeId, reports.CurrentDate from ams_cviews_reports reports, AMS_ReportType reporttype where reports.reporttypeid=reporttype.reporttypeid AND IsSystem = &#x27;1&#x27;</SqlServerVersion>
		<OracleVersion>Select DISTINCT reports.guidreportid id , reports.chReportName &#x22;Report Name&#x22;, reports.chReportDesc &#x22;Report Description&#x22;, CASE WHEN nPublished = 1 THEN &#x27;Published&#x27; ELSE &#x27;Not Published&#x27; END &#x22;Status&#x22;, reporttype.IsSystem IsSystem, reporttype.reportTypeId reportTypeId, reports.CurrentDate from ams_cviews_reports reports, AMS_ReportType reporttype  where reports.reporttypeid=reporttype.reporttypeid AND IsSystem = 1</OracleVersion>
	</Query>
	<Query id="GetTopIssues">
		<SqlServerVersion>SELECT TOP 9 IssueID,IssueAbstract,IssueType,CreateDate, P.UserName, ApplicationLName,CreatedBy,IssueText,I.ApplicationID, I.Status, A.ApplicationType, u.ServerFilePath,I.DueDate,I.PersonID,P1.UserName from ams_Issues I LEFT OUTER JOIN AMS_UploadedFiles u ON i.uploadedfileid=u.FileID , AMS_Application A, AMS_Person P, AMS_PERSON P1, AMS_ApplicationStatus AST where I.ApplicationID=A.ApplicationID and I.CreatedBy=P.PersonID and I.PersonID = P1.PERSONID and A.AppStatusID=AST.StatusID AND (A.ApplicationType=1 OR A.ApplicationType=2) and AST.IsActive=1 {0} order by CreateDate desc</SqlServerVersion>
		<OracleVersion>SELECT IssueID,IssueAbstract,IssueType,CreateDate, P.UserName, ApplicationLName,CreatedBy,IssueText,I.ApplicationID, I.Status, A.ApplicationType, u.ServerFilePath,I.DueDate,I.PersonID,P1.UserName from ams_Issues I LEFT OUTER JOIN AMS_UploadedFiles u ON i.uploadedfileid=u.FileID , AMS_Application A, AMS_Person P, AMS_PERSON P1, AMS_ApplicationStatus AST where I.ApplicationID=A.ApplicationID and I.CreatedBy=P.PersonID and I.PERSONID = P1.PERSONID and A.AppStatusID=AST.StatusID AND (A.ApplicationType=1 OR A.ApplicationType=2) and AST.IsActive=1 AND ROWNUM &lt;= 9 {0} order by CreateDate desc</OracleVersion>
	</Query>
	<Query id="GetTopAppRequests">
		<SqlServerVersion>SELECT TOP 9 a.ApplicationID, a.ApplicationLName,cc.CompanyName,awf.WFMajorItemName ,a.UploadDate FROM AMS_Application a, AMS_Company cc, AMS_WFMajorItemTpl awf, AMS_ApplicationStatus AST WHERE  a.IsTestApplication=0 AND cc.CompanyID=a.CompanyID  AND a.CurrentWFMajorItemID = awf.WFMajorItemID  and a.AppStatusID=AST.StatusID AND AST.IsActive=1 AND  a.UploadBy = &#x27;{0}&#x27;</SqlServerVersion>
		<OracleVersion>SELECT a.ApplicationID, a.ApplicationLName,cc.CompanyName,awf.WFMajorItemName ,a.UploadDate FROM AMS_Application a, AMS_Company cc, AMS_WFMajorItemTpl awf, AMS_ApplicationStatus AST WHERE  a.IsTestApplication=0 AND cc.CompanyID=a.CompanyID  AND a.CurrentWFMajorItemID = awf.WFMajorItemID and a.AppStatusID=AST.StatusID AND AST.IsActive=1 AND  a.UploadBy = &#x27;{0}&#x27; AND ROWNUM &lt;=9</OracleVersion>
	</Query>	
	<Query id="GetTopReportsNormal">
		<SqlServerVersion>Select DISTINCT TOP 9 reports.guidreportid &#x27;id&#x27; , reports.chReportName &#x27;Report Name&#x27;,reports.chReportDesc &#x27;Report Description&#x27;,reporttype.reportTypeId reportTypeId ,reporttype.IsSystem IsSystem, reports.CurrentDate FROM AMS_CVIEWS_REPORTS reports, AMS_ReportType reporttype ,AMS_ReportRoles WHERE reports.reporttypeid=reporttype.reporttypeid AND reports.guidReportID = AMS_ReportRoles.guidReportID AND AMS_ReportRoles.RoleID IN({0})</SqlServerVersion>
		<OracleVersion>Select DISTINCT reports.guidreportid id , reports.chReportName &#x22;Report Name&#x22;, reports.chReportDesc &#x22;Report Description&#x22;,reporttype.reportTypeId reportTypeId ,reporttype.IsSystem IsSystem, reports.CurrentDate FROM AMS_CVIEWS_REPORTS reports, AMS_ReportType reporttype ,AMS_ReportRoles WHERE reports.reporttypeid=reporttype.reporttypeid AND reports.guidReportID = AMS_ReportRoles.guidReportID AND AMS_ReportRoles.RoleID IN({0}) AND ROWNUM &lt;=9</OracleVersion>
	</Query>	
	<Query id="GetTopReportsAdmin">
		<SqlServerVersion>Select reports.guidreportid &#x27;id&#x27; , reports.chReportName &#x27;Report Name&#x27;, reports.chReportDesc &#x27;Report Description&#x27;, reporttype.reportTypeId reportTypeId ,reporttype.IsSystem IsSystem, reports.CurrentDate from ams_cviews_reports reports, AMS_ReportType reporttype  where reports.reporttypeid=reporttype.reporttypeid  AND IsSystem = &#x27;1&#x27;</SqlServerVersion>
		<OracleVersion>Select reports.guidreportid &#x22;id&#x22; , reports.chReportName &#x22;Report Name&#x22;, reports.chReportDesc &#x22;Report Description&#x22;, reporttype.reportTypeId reportTypeId ,reporttype.IsSystem IsSystem, reports.CurrentDate CurrentDate from ams_cviews_reports reports, AMS_ReportType reporttype  where reports.reporttypeid=reporttype.reporttypeid  AND IsSystem = &#x27;1&#x27;</OracleVersion>
	</Query>	
	<Query id="GetTopWrkAssignment">
		<SqlServerVersion>SELECT  DISTINCT TOP 9 A.ApplicationID,A.ApplicationLName ,cc.CompanyName,awf.WFMajorItemName,a.UploadDate,a.ContractID FROM AMS_Application A, AMS_ApplicationStatus ,AMS_Company cc,AMS_WFMajorItemTpl awf, AMS_Contracts c WHERE (AMS_ApplicationStatus.StatusID = A.AppStatusID) AND (A.CompanyID=cc.CompanyID) AND awf.WFMajorItemID=A.CurrentWFMajorItemID AND a.ContractID=c.ContractID AND (AMS_ApplicationStatus.IsActive = 1) and c.Disabled=0 AND A.CompanyID IN (SELECT DISTINCT a.CompanyID FROM AMS_Company a, AMS_ServiceCompanyJoin b WHERE a.CompanyID = &#x27;{0}&#x27; OR (a.CompanyID = b.CompanyID AND b.ServiceCompanyID = &#x27;{1}&#x27;) AND ApplicationID NOT IN (SELECT DISTINCT ApplicationID FROM AMS_AppAssignments)) ORDER BY a.UploadDate DESC</SqlServerVersion>
		<OracleVersion>SELECT  DISTINCT A.ApplicationID,A.ApplicationLName ,cc.CompanyName,awf.WFMajorItemName,a.UploadDate,a.ContractID FROM AMS_Application A, AMS_ApplicationStatus ,AMS_Company cc,AMS_WFMajorItemTpl awf, AMS_Contracts c WHERE (AMS_ApplicationStatus.StatusID = A.AppStatusID) AND (A.CompanyID=cc.CompanyID) AND awf.WFMajorItemID=A.CurrentWFMajorItemID AND a.ContractID=c.ContractID AND (AMS_ApplicationStatus.IsActive = 1) and c.Disabled=0 AND ROWNUM &lt;=9 AND A.CompanyID IN (SELECT DISTINCT a.CompanyID FROM AMS_Company a, AMS_ServiceCompanyJoin b WHERE a.CompanyID = &#x27;{0}&#x27; OR (a.CompanyID = b.CompanyID AND b.ServiceCompanyID = &#x27;{1}&#x27;)  AND ApplicationID NOT IN (SELECT DISTINCT ApplicationID FROM AMS_AppAssignments)) ORDER BY a.UploadDate DESC</OracleVersion>
	</Query>	
	<Query id="EX_DisplayApplication">
		<DefaultVersion>SELECT ApplicationID, ApplicationLName as LinkColumn, RequestPrefix +' '+ cast(CompanyAppSeqNo as varchar) as ARNumber, ApplicationLName, T.TemplateName, TotalIssues, NewIssues, UploadDate, DueDate, AW.WFMajorItemName as WorkFlowPhase ,ApplicationLName as FamilyColumn FROM AMS_Application A,AMS_WFMajorItemTpl AW, AMS_ApplicationStatus AST , AMS_Templates T ,AMS_Contracts AMSC  WHERE  A.ContractID = AMSC.ContractID and AW.WFMajorItemId=A.CurrentWFMajorItemID  and AST.StatusID=A.AppStatusID AND A.TemplateID = T.TemplateID AND ApplicationType = 2 AND (AST.IsActive = 1) AND A.ContractID = @ContractID ORDER BY ApplicationLName</DefaultVersion>
		<SqlServerVersion>SELECT ApplicationID, ApplicationLName as LinkColumn, RequestPrefix +' '+ cast(CompanyAppSeqNo as varchar) as ARNumber, ApplicationLName, T.TemplateName, TotalIssues, NewIssues, UploadDate, DueDate, AW.WFMajorItemName as WorkFlowPhase ,ApplicationLName as FamilyColumn FROM AMS_Application A,AMS_WFMajorItemTpl AW, AMS_ApplicationStatus AST , AMS_Templates T ,AMS_Contracts AMSC  WHERE  A.ContractID = AMSC.ContractID and AW.WFMajorItemId=A.CurrentWFMajorItemID  and AST.StatusID=A.AppStatusID AND A.TemplateID = T.TemplateID AND ApplicationType = 2 AND (AST.IsActive = 1) AND A.ContractID = @ContractID ORDER BY ApplicationLName</SqlServerVersion>
		<OracleVersion>SELECT ApplicationID, ApplicationLName as LinkColumn, RequestPrefix ||' '|| cast(CompanyAppSeqNo as varchar2(32)) as ARNumber, ApplicationLName, T.TemplateName, TotalIssues, NewIssues, UploadDate, DueDate, AW.WFMajorItemName as WorkFlowPhase ,ApplicationLName as FamilyColumn FROM AMS_Application A,AMS_WFMajorItemTpl AW, AMS_ApplicationStatus AST , AMS_Templates T ,AMS_Contracts AMSC  WHERE  A.ContractID = AMSC.ContractID and AW.WFMajorItemId=A.CurrentWFMajorItemID  and AST.StatusID=A.AppStatusID AND A.TemplateID = T.TemplateID AND ApplicationType = 2 AND (AST.IsActive = 1) AND A.ContractID = @ContractID ORDER BY ApplicationLName</OracleVersion>
	</Query>
	<Query id="Reports_GetProjectSummary">
		<SqlServerVersion>SELECT [cc].[CompanyName] AS [Customer Company] , [sc].[CompanyName] AS [Service Company],[cont].[ContractName], [cont].[ContractLocator], [cont].[StartDate], [cont].[EndDate], [cont].[CPNnumber],[pc].[UserName] + ' '  AS [Primary Client Contact Person], LOWER([pc].[email]) AS [PCEmail], [pc].[phone]  AS [PCPhone],[psc].[UserName] + ' '  AS [Primary Service Company Contact], LOWER([psc].[email])  AS [PSCEmail], [psc].[phone] AS [PSCPhone] FROM [AMS_Company] AS [cc] INNER JOIN [AMS_ServiceCompanyJoin] AS [scj] ON [cc].[CompanyID] = [scj].[CompanyID] INNER JOIN [AMS_Company] AS [sc] ON [sc].[CompanyID] = [scj].[ServiceCompanyID] INNER JOIN [AMS_Contracts] AS [cont] ON [cont].[CompanyID] = [cc].[CompanyID]  INNER JOIN [AMS_Person] AS [pc] ON [pc].[PersonID] = [cont].[PrimaryClientContact] INNER JOIN [AMS_Person] AS [psc] ON [psc].[PersonID] = [cont].[PrimarySCContact]  WHERE [cc].[CompanyID] = &#x27;{0}&#x27;</SqlServerVersion>
		<OracleVersion>SELECT cc.CompanyName &#x22;Customer Company&#x22; , sc.CompanyName &#x22;Service Company&#x22;,cont.ContractName, cont.ContractLocator, cont.StartDate, cont.EndDate, cont.CPNnumber,pc.UserName || &#x27; &#x27;  &#x22;Pri.Cl. Person&#x22;, LOWER(pc.email) &#x22;PCEmail&#x22;, pc.phone  &#x22;PCPhone&#x22;,psc.UserName || &#x27; &#x27;  &#x22;Pri.Svc Contact&#x22;, LOWER(psc.email)  &#x22;PSCEmail&#x22;, psc.phone &#x22;PSCPhone&#x22; FROM AMS_Company cc INNER JOIN AMS_ServiceCompanyJoin scj ON cc.CompanyID = scj.CompanyID INNER JOIN AMS_Company sc ON sc.CompanyID = scj.ServiceCompanyID INNER JOIN AMS_Contracts cont ON cont.CompanyID = cc.CompanyID  INNER JOIN AMS_Person pc ON pc.PersonID = cont.PrimaryClientContact INNER JOIN AMS_Person psc ON psc.PersonID = cont.PrimarySCContact  WHERE cc.CompanyID = &#x27;{0}&#x27;</OracleVersion>
	</Query>	
	<Query id="Reports_GetProjectSummary2">
		<SqlServerVersion>SELECT [cc].[CompanyName] AS [Customer Company] , [sc].[CompanyName] AS [Service Company], [cont].[ContractName], [cont].[ContractLocator], [cont].[StartDate], [cont].[EndDate], [cont].[CPNnumber],[pc].[UserName] + ' ' AS [Primary Client Contact Person], LOWER([pc].[email]) AS [PCEmail], [pc].[phone]  AS [PCPhone],[psc].[UserName] + ' ' AS [Primary Service Company Contact], LOWER([psc].[email])  AS [PSCEmail], [psc].[phone] AS [PSCPhone] FROM [AMS_Company] AS [cc] INNER JOIN [AMS_ServiceCompanyJoin] AS [scj] ON [cc].[CompanyID] = [scj].[CompanyID] INNER JOIN [AMS_Company] AS [sc] ON [sc].[CompanyID] = [scj].[ServiceCompanyID] INNER JOIN [AMS_Contracts] AS [cont] ON [cont].[CompanyID] = [cc].[CompanyID]  INNER JOIN [AMS_Person] AS [pc] ON [pc].[PersonID] = [cont].[PrimaryClientContact] INNER JOIN [AMS_Person] AS [psc] ON [psc].[PersonID] = [cont].[PrimarySCContact] WHERE  [cc].[CompanyID] = &#x27;{0}&#x27; AND [cont].[ContractID] =&#x27;{1}&#x27;</SqlServerVersion>
		<OracleVersion>SELECT cc.CompanyName &#x22;Customer Company&#x22; , sc.CompanyName &#x22;Service Company&#x22;, cont.ContractName, cont.ContractLocator, cont.StartDate, cont.EndDate, cont.CPNnumber,pc.UserName || &#x27; &#x27; &#x22;Pri.Cl. Person&#x22;, LOWER(pc.email) &#x22;PCEmail&#x22;, pc.phone  &#x22;PCPhone&#x22;,psc.UserName || &#x27; &#x27; &#x22;Pri.Svc Contact&#x22;, LOWER(psc.email)  &#x22;PSCEmail&#x22;, psc.phone &#x22;PSCPhone&#x22; FROM AMS_Company cc INNER JOIN AMS_ServiceCompanyJoin scj ON cc.CompanyID = scj.CompanyID INNER JOIN AMS_Company sc ON sc.CompanyID = scj.ServiceCompanyID INNER JOIN AMS_Contracts cont ON cont.CompanyID = cc.CompanyID  INNER JOIN AMS_Person pc ON pc.PersonID = cont.PrimaryClientContact INNER JOIN AMS_Person psc ON psc.PersonID = cont.PrimarySCContact WHERE  cc.CompanyID = &#x27;{0}&#x27; AND cont.ContractID =&#x27;{1}&#x27;</OracleVersion>
	</Query>	
	<Query id="GetTotalAppOverdue">
		<SqlServerVersion>SELECT COUNT(*) FROM AMS_Application WHERE ContractID = &#x27;{0}&#x27; AND '{1}' &gt; DueDate AND StatusSummary &lt;&gt; 90</SqlServerVersion>
		<OracleVersion>SELECT COUNT(*) FROM AMS_Application WHERE ContractID = &#x27;{0}&#x27; AND '{1}' &gt; DueDate AND StatusSummary &lt;&gt; 90</OracleVersion>
	</Query>	
	<Query id="GetAppProgress">
		<SqlServerVersion>SELECT [ApplicationID] FROM [AMS_Application] WHERE [ContractID] ='{0}' AND '{1}' > [DueDate] AND [StatusSummary] &lt;&gt; 90</SqlServerVersion>
		<OracleVersion>SELECT ApplicationID FROM AMS_Application WHERE ContractID ='{0}' AND '{1}' > DueDate AND StatusSummary &lt;&gt; 90</OracleVersion>
	</Query>	
	<Query id="GetSMSDefaultProvider">
		<SqlServerVersion>SELECT TOP 1 [DefaultProvider] FROM  [AMS_GlobalDistributionSettings]</SqlServerVersion>
		<OracleVersion>SELECT DefaultProvider FROM AMS_GlobalDistributionSettings WHERE ROWNUM &lt;= 1</OracleVersion>
	</Query>	
	<Query id="UpdateMajorItems">
		<SqlServerVersion>Update AMS_ApplicationItem SET Submitbool=1 from ams_application where AMS_ApplicationItem.applicationid='{0}' and AMS_ApplicationItem.itemid=ams_application.CurrentWFMajorItemID and ams_applicationitem.applicationid=ams_application.applicationid</SqlServerVersion>		
		<OracleVersion>Update AMS_ApplicationItem a SET(a.SubmitBool) = (SELECT 1 from ams_application b where a.applicationid='{0}' and  a.itemid=b.CurrentWFMajorItemID  and a.applicationid=b.applicationid and rownum &lt;=1) where exists (SELECT 1 from ams_application b where a.applicationid='{1}' and a.itemid=b.CurrentWFMajorItemID and a.applicationid=b.applicationid)</OracleVersion>
	</Query>
	<Query id="UpdateMinorItems">
		<SqlServerVersion>Update AMS_ApplicationItem SET Submitbool=1 from ams_application where AMS_ApplicationItem.applicationid='{0}' and AMS_ApplicationItem.itemid=ams_application.CurrentWFMinorItemID and ams_applicationitem.applicationid=ams_application.applicationid</SqlServerVersion>
		<OracleVersion>Update AMS_ApplicationItem a SET(a.SubmitBool) = (SELECT 1 from ams_application b where a.applicationid='{0}' and  a.itemid=b.CurrentWFMinorItemID  and a.applicationid=b.applicationid and rownum &lt;=1) where exists (SELECT 1 from ams_application b where a.applicationid='{1}' and a.itemid=b.CurrentWFMinorItemID and a.applicationid=b.applicationid)</OracleVersion>
	</Query>
	<Query id="UpdateAppASUserNameAndSequenceNumber">
		<SqlServerVersion>UPDATE AMS_Application SET ASUsername = '{0}', MRNumber = 'CustoMR' + Convert(varchar, CompanyAppSeqNo) WHERE Applicationid = '{1}'</SqlServerVersion>
		<OracleVersion>UPDATE AMS_Application SET ASUsername = '{0}', MRNumber = 'CustoMR' || CAST(CompanyAppSeqNo AS VARCHAR2(50)) WHERE Applicationid = '{1}'</OracleVersion>
	</Query>
	<Query id="GetWFStepMostRecentBeginTime">
		<SqlServerVersion>SELECT TOP 1 att.ChangedDate FROM AMS_Audittrail att, AMS_Applicationitem ai WHERE att.ApplicationID = '{0}' AND att.AuditTablePK = ai.ApplicationItemID AND ai.ItemID = '{1}' AND att.AuditTypeCode = {2} ORDER BY ChangedDate DESC</SqlServerVersion>
		<OracleVersion>SELECT att.ChangedDate FROM AMS_Audittrail att, AMS_Applicationitem ai WHERE att.ApplicationID = '{0}' AND att.AuditTablePK = ai.ApplicationItemID AND ai.ItemID = '{1}' AND att.AuditTypeCode = {2} AND ROWNUM = 1 ORDER BY ChangedDate DESC</OracleVersion>
	</Query>
	<Query id="GetSLAClockCurrentStatus">
		<SqlServerVersion>SELECT TOP 1 AuditTypeCode, ChangedDate FROM AMS_AuditTrail WHERE (AuditTypeCode = {0} OR AuditTypeCode = {1}) AND AuditTablePK = '{2}' AND ApplicationID = '{3}' ORDER BY ChangedDate DESC</SqlServerVersion>
		<OracleVersion>SELECT AuditTypeCode, ChangedDate FROM (SELECT AuditTypeCode, ChangedDate FROM AMS_AuditTrail WHERE (AuditTypeCode = {0} OR AuditTypeCode = {1}) AND AuditTablePK = '{2}' AND ApplicationID = '{3}' ORDER BY ChangedDate DESC) WHERE ROWNUM=1</OracleVersion>
	</Query>
	<Query id="GetAppStatusChangeHistory">
		<SqlServerVersion>SELECT ast.Status_Text, a.ChangedDate From AMS_AuditTrail a, AMS_ApplicationStatus ast WHERE a.NewValue = CAST(ast.StatusID AS varchar) AND a.ApplicationID = '{0}' AND a.AuditTypeCode = {1} ORDER BY a.ChangedDate Desc</SqlServerVersion>
		<OracleVersion>SELECT ast.Status_Text, a.ChangedDate From AMS_AuditTrail a, AMS_ApplicationStatus ast WHERE a.NewValue = CAST(ast.StatusID AS varchar2(10)) AND a.ApplicationID = '{0}' AND a.AuditTypeCode = {1} ORDER BY a.ChangedDate Desc</OracleVersion>
	</Query>
 	<Query id="GetAtRiskActiveApplications">
 		<SqlServerVersion>SELECT ApplicationID FROM AMS_Application A, AMS_ApplicationStatus AST WHERE A.AppStatusID = AST.StatusID AND AST.IsActive = 1 AND A.StatusSummary &lt;&gt; {0} AND '{1}' &gt; A.RiskDate AND '{2}' &lt; A.DueDate AND A.ContractID = '{3}' AND A.SendEmailsAtAppRisk = 1</SqlServerVersion>
 		<OracleVersion>SELECT ApplicationID FROM AMS_Application A, AMS_ApplicationStatus AST WHERE A.AppStatusID = AST.StatusID AND AST.IsActive = 1 AND A.StatusSummary &lt;&gt; {0} AND '{1}' &gt; A.RiskDate AND '{2}' &lt; A.DueDate AND A.ContractID = '{3}' AND A.SendEmailsAtAppRisk = 1</OracleVersion>
 	</Query>
 	<Query id="GetAtRiskApplicationCount">
 		<SqlServerVersion>SELECT Count(*) FROM AMS_Application WHERE StatusSummary &lt;&gt; {0} AND '{1}' &gt; RiskDate AND '{2}' &lt; DueDate AND ContractID = '{3}'</SqlServerVersion>
 		<OracleVersion>SELECT Count(*) FROM AMS_Application WHERE StatusSummary &lt;&gt; {0} AND '{1}' &gt; RiskDate AND '{2}' &lt; DueDate AND ContractID = '{3}'</OracleVersion>
 	</Query>
 	<Query id="GetOnTimeActiveApplications">
 		<SqlServerVersion>SELECT ApplicationID FROM AMS_Application A, AMS_ApplicationStatus AST WHERE A.AppStatusID = AST.StatusID AND AST.IsActive = 1 AND A.StatusSummary &lt;&gt; {0} AND '{1}' &lt; A.RiskDate AND A.ContractID = '{2}'</SqlServerVersion>
 		<OracleVersion>SELECT ApplicationID FROM AMS_Application A, AMS_ApplicationStatus AST WHERE A.AppStatusID = AST.StatusID AND AST.IsActive = 1 AND A.StatusSummary &lt;&gt; {0} AND '{1}' &lt; A.RiskDate AND A.ContractID = '{2}'</OracleVersion>
 	</Query>
 	<Query id="GetOnTimeApplicationCount">
 		<SqlServerVersion>SELECT Count(*) FROM AMS_Application WHERE StatusSummary &lt;&gt; {0} AND '{1}' &lt; RiskDate AND ContractID = '{2}'</SqlServerVersion>
 		<OracleVersion>SELECT Count(*) FROM AMS_Application WHERE StatusSummary &lt;&gt; {0} AND '{1}' &lt; RiskDate AND ContractID = '{2}'</OracleVersion>
 	</Query>
 	<Query id="GetWFPhaseInfoForAtRiskApplications">
 		<SqlServerVersion>SELECT WFMajorItemName, SUM(ARPerPhase) ARPerPhase, SortOrder, WFMajorItemType,WFMajorItemID,TemplateID FROM ( SELECT wmajor.WFMajorItemName, COUNT(app.ApplicationLName) ARPerPhase, wmajor.SortOrder, wmajor.WFMajorItemType,wmajor.WFMajorItemID,wmajor.TemplateID FROM AMS_WFMajorItemTpl wmajor LEFT OUTER JOIN AMS_Application app ON  app.CompanyID = '{0}' AND app.ContractID = '{1}' AND app.StatusSummary &lt;&gt; {2} AND '{3}' &gt; app.RiskDate AND '{4}' &lt; app.DueDate AND wmajor.WFMajorItemType &lt; 1000 AND wmajor.WFMajorItemID = app.CurrentWFMajorItemID GROUP BY wmajor.WFMajorItemName, wmajor.SortOrder, wmajor.TemplateID, wmajor.WFMajorItemType,wmajor.WFMajorItemID HAVING wmajor.WFMajorItemType &lt; 1000 AND (wmajor.TemplateID IN  ( Select Distinct TemplateID from ams_application where contractid =  '{5}') ) ) tbl1 GROUP BY WFMajorItemName, SortOrder, WFMajorItemType, WFMajorItemID, TemplateID ORDER BY SortOrder ASC</SqlServerVersion>
 		<OracleVersion>SELECT WFMajorItemName, SUM(ARPerPhase) ARPerPhase, SortOrder, WFMajorItemType,WFMajorItemID,TemplateID FROM ( SELECT wmajor.WFMajorItemName, COUNT(app.ApplicationLName) ARPerPhase, wmajor.SortOrder, wmajor.WFMajorItemType,wmajor.WFMajorItemID,wmajor.TemplateID FROM AMS_WFMajorItemTpl wmajor LEFT OUTER JOIN AMS_Application app ON  app.CompanyID = '{0}' AND app.ContractID = '{1}' AND app.StatusSummary &lt;&gt; {2} AND '{3}' &gt; app.RiskDate AND '{4}' &lt; app.DueDate AND wmajor.WFMajorItemType &lt; 1000 AND wmajor.WFMajorItemID = app.CurrentWFMajorItemID GROUP BY wmajor.WFMajorItemName, wmajor.SortOrder, wmajor.TemplateID, wmajor.WFMajorItemType,wmajor.WFMajorItemID HAVING wmajor.WFMajorItemType &lt; 1000 AND (wmajor.TemplateID IN  ( Select Distinct TemplateID from ams_application where contractid =  '{5}') ) ) tbl1 GROUP BY WFMajorItemName, SortOrder, WFMajorItemType, WFMajorItemID, TemplateID ORDER BY SortOrder ASC</OracleVersion>
 	</Query>
 	<Query id="GetWFPhaseInfoForOnTimeApplications">
 		<SqlServerVersion>SELECT WFMajorItemName, SUM(ARPerPhase) ARPerPhase, SortOrder, WFMajorItemType,WFMajorItemID,TemplateID FROM ( SELECT wmajor.WFMajorItemName, COUNT(app.ApplicationLName) ARPerPhase, wmajor.SortOrder, wmajor.WFMajorItemType,wmajor.WFMajorItemID,wmajor.TemplateID FROM AMS_WFMajorItemTpl wmajor LEFT OUTER JOIN AMS_Application app ON  app.CompanyID = '{0}' AND app.ContractID = '{1}' AND app.StatusSummary &lt;&gt; {2} AND '{3}' &lt; app.RiskDate AND wmajor.WFMajorItemType &lt; 1000 AND wmajor.WFMajorItemID = app.CurrentWFMajorItemID GROUP BY wmajor.WFMajorItemName, wmajor.SortOrder, wmajor.TemplateID, wmajor.WFMajorItemType,wmajor.WFMajorItemID HAVING wmajor.WFMajorItemType &lt; 1000 AND (wmajor.TemplateID IN  ( Select Distinct TemplateID from ams_application where contractid =  '{4}') ) ) tbl1 GROUP BY WFMajorItemName, SortOrder, WFMajorItemType, WFMajorItemID,TemplateID ORDER BY SortOrder ASC</SqlServerVersion>
 		<OracleVersion>SELECT WFMajorItemName, SUM(ARPerPhase) ARPerPhase, SortOrder, WFMajorItemType,WFMajorItemID,TemplateID FROM ( SELECT wmajor.WFMajorItemName, COUNT(app.ApplicationLName) ARPerPhase, wmajor.SortOrder, wmajor.WFMajorItemType,wmajor.WFMajorItemID,wmajor.TemplateID FROM AMS_WFMajorItemTpl wmajor LEFT OUTER JOIN AMS_Application app ON  app.CompanyID = '{0}' AND app.ContractID = '{1}' AND app.StatusSummary &lt;&gt; {2} AND '{3}' &lt; app.RiskDate AND wmajor.WFMajorItemType &lt; 1000 AND wmajor.WFMajorItemID = app.CurrentWFMajorItemID GROUP BY wmajor.WFMajorItemName, wmajor.SortOrder, wmajor.TemplateID, wmajor.WFMajorItemType,wmajor.WFMajorItemID HAVING wmajor.WFMajorItemType &lt; 1000 AND (wmajor.TemplateID IN  ( Select Distinct TemplateID from ams_application where contractid =  '{4}') ) ) tbl1 GROUP BY WFMajorItemName, SortOrder, WFMajorItemType, WFMajorItemID,TemplateID ORDER BY SortOrder ASC</OracleVersion>
 	</Query>
 	<Query id="GetWFPhaseInfoForAtRiskApplicationsQuery2">
 		<SqlServerVersion>SELECT WFMajorItemName, SUM(ARPerPhase) ARPerPhase, SortOrder, WFMajorItemType FROM ( SELECT wmajor.WFMajorItemName, COUNT(app.ApplicationLName) ARPerPhase, wmajor.SortOrder, wmajor.WFMajorItemType FROM AMS_WFMajorItemTpl wmajor LEFT OUTER JOIN AMS_Application app ON  app.CompanyID = '{0}' AND app.ContractID = '{1}' AND app.StatusSummary &lt;&gt; {2} AND '{3}' &gt; app.RiskDate AND '{4}' &lt; app.DueDate AND wmajor.WFMajorItemType &lt; 1000 AND wmajor.WFMajorItemID = app.CurrentWFMajorItemID GROUP BY wmajor.WFMajorItemName, wmajor.SortOrder, wmajor.TemplateID, wmajor.WFMajorItemType,wmajor.WFMajorItemID HAVING wmajor.WFMajorItemType &lt; 1000 AND (wmajor.TemplateID  IN (Select Distinct TemplateID from ams_application where contractid =  '{5}')) ) tbl1  GROUP BY WFMajorItemName,SortOrder,WFMajorItemType ORDER BY SortOrder ASC</SqlServerVersion> 
 		<OracleVersion>SELECT WFMajorItemName, SUM(ARPerPhase) ARPerPhase, SortOrder, WFMajorItemType FROM ( SELECT wmajor.WFMajorItemName, COUNT(app.ApplicationLName) ARPerPhase, wmajor.SortOrder, wmajor.WFMajorItemType FROM AMS_WFMajorItemTpl wmajor LEFT OUTER JOIN AMS_Application app ON  app.CompanyID = '{0}' AND app.ContractID = '{1}' AND app.StatusSummary &lt;&gt; {2} AND '{3}' &gt; app.RiskDate AND '{4}' &lt; app.DueDate AND wmajor.WFMajorItemType &lt; 1000 AND wmajor.WFMajorItemID = app.CurrentWFMajorItemID GROUP BY wmajor.WFMajorItemName, wmajor.SortOrder, wmajor.TemplateID, wmajor.WFMajorItemType,wmajor.WFMajorItemID HAVING wmajor.WFMajorItemType &lt; 1000 AND (wmajor.TemplateID  IN (Select Distinct TemplateID from ams_application where contractid =  '{5}')) ) tbl1  GROUP BY WFMajorItemName,SortOrder,WFMajorItemType ORDER BY SortOrder ASC</OracleVersion> 
 	</Query>
 	<Query id="GetWFPhaseInfoForOnTimeApplicationsQuery2">
 		<SqlServerVersion>SELECT WFMajorItemName, SUM(ARPerPhase) ARPerPhase, SortOrder, WFMajorItemType FROM ( SELECT wmajor.WFMajorItemName, COUNT(app.ApplicationLName) ARPerPhase, wmajor.SortOrder, wmajor.WFMajorItemType FROM AMS_WFMajorItemTpl wmajor LEFT OUTER JOIN AMS_Application app ON  app.CompanyID = '{0}' AND app.ContractID = '{1}' AND app.StatusSummary &lt;&gt; {2} AND '{3}' &lt; app.RiskDate AND wmajor.WFMajorItemType &lt; 1000 AND wmajor.WFMajorItemID = app.CurrentWFMajorItemID GROUP BY wmajor.WFMajorItemName, wmajor.SortOrder, wmajor.TemplateID, wmajor.WFMajorItemType,wmajor.WFMajorItemID HAVING wmajor.WFMajorItemType &lt; 1000 AND (wmajor.TemplateID IN  (Select Distinct TemplateID from ams_application where contractid =  '{4}')) ) tbl1  GROUP BY WFMajorItemName,SortOrder,WFMajorItemType ORDER BY SortOrder ASC</SqlServerVersion>
 		<OracleVersion>SELECT WFMajorItemName, SUM(ARPerPhase) ARPerPhase, SortOrder, WFMajorItemType FROM ( SELECT wmajor.WFMajorItemName, COUNT(app.ApplicationLName) ARPerPhase, wmajor.SortOrder, wmajor.WFMajorItemType FROM AMS_WFMajorItemTpl wmajor LEFT OUTER JOIN AMS_Application app ON  app.CompanyID = '{0}' AND app.ContractID = '{1}' AND app.StatusSummary &lt;&gt; {2} AND '{3}' &lt; app.RiskDate AND wmajor.WFMajorItemType &lt; 1000 AND wmajor.WFMajorItemID = app.CurrentWFMajorItemID GROUP BY wmajor.WFMajorItemName, wmajor.SortOrder, wmajor.TemplateID, wmajor.WFMajorItemType,wmajor.WFMajorItemID HAVING wmajor.WFMajorItemType &lt; 1000 AND (wmajor.TemplateID IN  (Select Distinct TemplateID from ams_application where contractid =  '{4}')) ) tbl1  GROUP BY WFMajorItemName,SortOrder,WFMajorItemType ORDER BY SortOrder ASC</OracleVersion>
 	</Query>
</Queries>





